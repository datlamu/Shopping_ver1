<div id="orderTableContainer">
	<partial name="_OrderTablePartial" model="Model" />
</div>
@section Scripts {
	<script>
		// Tải lại bảng
		function reloadOrderTable(page = 1) {
		// Chạy khi trang được load lại
			$("#orderTableContainer").load("/Admin/Order/GetOrderTable?page=" + page, function () {
				attachOrderEvents(); // Gắn lại sự kiện sau khi load xong
			});
		}

		// Gắn sự kiện click vào các nút phân trang
		$(document).on("click", ".page-ajax", function (e) {
			e.preventDefault(); // Ngăn mặc định chuyển trang
			const page = $(this).data("page");
			reloadOrderTable(page);
		});

		// Gắn sự kiện giỏ hàng
		function attachOrderEvents() {
		// Chạy khi button được click vào
			$('.delete-orderitem').off('click').on('click', function () {
				let currentPage = parseInt($(".pagination li.active").text()) || 1;
				// Url Action
				var url = '/Admin/Order/Delete';
				// Lấy id của sản phẩm
				var	orderCode = $(this).val();
				let data = { orderCode };

				// Gọi Ajax
				sendAjax({
					url,
					data,
					onSuccess: function () {
						reloadOrderTable(currentPage);
					}
				});
			});
		}
		$(document).ready(function () {
			attachOrderEvents();
		});
	</script>
}