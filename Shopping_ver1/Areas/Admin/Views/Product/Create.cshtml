@model ProductModel
@{
	ViewData["title"] = "Create Product";
	// Kiểm tra action nào được chọn nếu có model thì gán id chính nó
	var isEdit = Model != null && Model.Id != 0;
}
<h3>List Product</h3>

<form asp-action="@(isEdit ? "Edit" : "Create")" asp-area="Admin" enctype="multipart/form-data">
	@Html.AntiForgeryToken()
	<div asp-validation-summary="ModelOnly" class="text-danger"></div>
	<div class="form-group">
		<label>Name</label>
		<input asp-for="Name" class="form-control" />
		<span asp-validation-for="Name" class="text-danger" />
	</div>
	<div class="form-group">
		<label>Description</label>
		<textarea asp-for="Description" class="form-control"></textarea>
		<span asp-validation-for="Description" class="text-danger" />
	</div>
	<div class="form-group">
		<label>Price</label>
		<input asp-for="Price" class="form-control" />
		<span asp-validation-for="Price" class="text-danger" />
	</div>
	<div class="form-group">
		<label>Category</label>
		<select asp-for="CategoryId" class="form-control" asp-items="ViewBag.Categories">
			<option value="0">--Choose a Category</option>
		</select>
		<span asp-validation-for="CategoryId" class="text-danger" />
	</div>
	<div class="form-group">
		<label>Brand</label>
		<select asp-for="BrandId" class="form-control" asp-items="ViewBag.Brands">
			<option value="0">--Choose a Brand</option>
		</select>
		<span asp-validation-for="BrandId" class="text-danger" />
	</div>
	<div class="form-group">
		<label>Image</label>
		<input asp-for="ImageUpload" type="file" class="form-control" onchange="previewImage(this)" />
		<span class="text-danger">
			@Html.ValidationMessage("ImageUpload", null, new { @class = "text-danger" })
		</span>
		<br />
		<img id="preview-img" src="~/media/products/@(string.IsNullOrEmpty(Model?.Image) ? "default.png" : Model.Image)" alt="Ảnh sản phẩm" width="120" />
		<input type="hidden" asp-for="Image" />
	</div>
	<div class="form-group">
		<button class="btn btn-success">@(isEdit ? "Edit" : "Create")</button>
	</div>
</form>
<a asp-controller="Product" asp-action="Index">Back to list product</a>
@* RenderPartial *@
@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}

	@* Edit cho TextArea bằng ckeditor*@
	<script src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>
	<script>
		CKEDITOR.replace('Description',{versionCheck: false});
	</script>

	@* Hiển thị ảnh khi chọn file *@
	<script src="~/backend/js/site.js"></script>
}